# Обязана ли база данных использовать индекс, если он есть и в запросе указаны столбцы из этого индекса? Как проверить то, что индекс используется для определенного запроса?
---

Узнать, как отдельный запрос использует индексы, можно с помощью команды [EXPLAIN](https://postgrespro.ru/docs/postgresql/9.6/sql-explain)

**Реляционные базы данных в примерах, 2021, (Святослав Куликов):**

> - С индексами на уровне базы данных и выполнения запросов к ней можно осуществить следующие основные операции:
>   - создать (удалить) индекс;
>   - отключить (включить) существующий индекс;
>   - проанализировать использование индекса при выполнении запроса;
>   - дать СУБД подсказку по использованию индекса.

> Создавая индексы, мы предполагаем, что с их помощью СУБД сможет более эффективно выполнять те или иные запросы. Но всегда стоит проверить, оправдались ли наши надежды.
> Одним из самых простых и в то же время рациональных способов такой проверки является анализ плана выполнения запроса, в котором СУБД предоставит нам информацию в т.ч. и об используемых индексах.
> В различных СУБД способ получения плана выполнения запроса и содержимое такого плана сильно различаются.

> Настало время подчеркнуть два важных факта:
> 1) Логика использования индексов очень сильно зависит от СУБД, метода доступа, вида индекса, набора данных, запроса и иных специфичных факторов. Не ожидайте, что показанное в рассматриваемых примерах всегда и везде будет работать именно таким образом.
> 2) Помните, что работа с индексами не даётся СУБД «бесплатно»: они занимают оперативную память, снижают производительность операций модификации данных и приводят к иным накладным расходам. Создавайте индексы обдуманно — там, где они на самом деле нужны.