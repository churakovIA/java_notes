# Как создать и запустить поток в Java?
---

### Процесс

Процесс имеет собственное окружение запуска, имеет законченный набор собственных ресурсов и собственную выделенную процессу память. Для взаимодействия между собой процессы могут использовать пайпы (pipes), сокеты (sockets) либо другие способы в зависимости от операционной системы. Это называется Inter Process Communication (IPC).

### Поток

Поток - это "облегченный процесс". Создание потока требует меньше ресурсов. Потоки существуют внутри процесса - и каждый процесс имеет как минимум один поток. Потоки разделяют между собой ресурсы процесса - включая память и открытые файлы. В этом есть плюсы и минусы - увеличивается эффективность использования ресурсов, но одновременно появляются проблемы с их совместным использованием.

С точки зрения Java-разработчика - любое приложение стартует процесс с единственным main-потоком. С точки зрения JVM - кроме main-потока запускаются еще несколько "сервисных" потоков - для управления памятью и сигналами.


## Создание потоков 

1. Используя класс `Thread` можно создать объект потока и непосредственно управлять его выполнением через методы класса.
1. Используя дополнительные возможности в виде сервисов-исполнителей (executors) - можно отправлять задачи на выполнение для автоматического запуска в зависимости от конфигурации исполнителей.

### Определение и запуск потока

#### Имплементировать `Runnable` интерфейс

```java
public class Worker implements Runnable {
    public void run() {
        System.out.println("I'm from a thread");
    }

    public static void main(String args[]) {
        (new Thread(new Worker())).start();
        System.out.println("I'm from the main thread.");
    }
}
```

#### Расширить `Thread` класс

```java
public class Worker extends Thread {

    @Override
    public void run() {
        System.out.println("I'm from a thread");
    }

    public static void main(String args[]) {
        (new Worker()).start();
        System.out.println("I'm from the main thread.");
    }
}
```

#### implements `Runnable` vs extends `Thread`

Вариант имплементации интерфейса `Runnable` - более гибкий, т.к. позволяет делать запускаемыми любые классы и более гибко решать задачи асинхронного запуска в больших системах. Вариант с наследованием от класса `Thread` - вполне годится для небольших задач и простых приложений где не требуется низкая связность и не предполагается длительного цикла разработки.

## Каким образом можно создать поток?

- Создать потомка класса `Thread` и переопределить его метод `run()`;
- Создать объект класса `Thread`, передав ему в конструкторе экземпляр класса, реализующего интерфейс `Runnable`. Этот интерфейс содержит метод `run()`, который будет выполняться в новом потоке. Поток закончит выполнение, когда завершится его метод `run()`.
- Вызвать метод `submit()` у экземпляра класса реализующего интерфейс `ExecutorService`, передав ему в качестве параметра экземпляр класса реализующего интерфейс `Runnable` или `Callable` (содержит метод `call()`, в котором описывается логика выполнения).

## Чем различаются `Thread` и `Runnable`?

`Thread` - это класс, некоторая надстройка над физическим потоком.

`Runnable` - это интерфейс, представляющий абстракцию над выполняемой задачей.

Помимо того, что `Runnable` помогает разрешить проблему множественного наследования, несомненный плюс от его использования состоит в том, что он позволяет логически отделить логику выполнения задачи от непосредственного управления потоком.

## В чём заключается разница между методами `start()` и `run()`?

Несмотря на то, что `start()` вызывает метод `run()` внутри себя, это не то же самое, что просто вызов `run()`. Если `run()` вызывается как обычный метод, то он вызывается в том же потоке и никакой новый поток не запускается, как это происходит, в случае, когда вы вызываете метод `start()`.