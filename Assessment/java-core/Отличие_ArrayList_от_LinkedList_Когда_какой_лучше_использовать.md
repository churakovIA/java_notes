# Отличие ArrayList от LinkedList? Когда какой лучше использовать?
---

- ArrayList - это список, реализованный на основе массива с доступом к произвольному элементу по индексу за постоянное время O(1). Используется в среднем чаще всего. Пример использования: список учеников в группе. В данном случае не требуется добавлять студентов в середину списка, т.к. их порядок не важен, поэтому ArrayList идеально подходит. Выведем на экран всех студентов группы. Сложность O(n).

- LinkedList — это классический связный список, основанный на объектах с ссылками между ними. Преимуществом перед ArrayList является вставка/удаление объектов в середине списка (O(n) в ArrayList против O(1) в LinkedList). Но доступ к объекту в ArrayList быстрее, чем в LinkedList (O(1) в ArrayList против O(n) в LinkedList). Поэтому, LinkedList предпочтительно применять, когда происходит активная работа (вставка/удаление) с серединой списка или в случаях, когда необходимо гарантированное время добавления элемента в список. Внутри класса LinkedList существует static inner класс Entry, с помощью которого создаются новые элементы. next и prev являются ссылками на следующий и предыдущий элементы списка.

  - в `LinkedList` есть обратный итератор, который можно получить вызва метод `descendingIterator()`
  - `LinkedList` позволяет добавлять элементы в начало и конец списка за константное время, что хорошо согласуется с поведением интерфейса `Deque`

  ### Для `ArrayList` или для `LinkedList` операция добавления элемента в середину (`list.add(list.size()/2, newElement)`) медленнее?

  Для `ArrayList`:

  - проверка массива на вместимость. Если вместимости недостаточно, то увеличение размера массива и копирование всех элементов в новый массив (*O(N)*);
  - копирование всех элементов, расположенных правее от позиции вставки, на одну позицию вправо (*O(N)*);
  - вставка элемента (*O(1)*).

  Для `LinkedList`:

  - поиск позиции вставки (*O(N)*);
  - вставка элемента (*O(1)*).

  В худшем случае вставка в середину списка эффективнее для `LinkedList`. В остальных - скорее всего, для `ArrayList`, поскольку копирование элементов осуществляется за счет вызова быстрого системного метода `System.arraycopy()`.

---

## Чем отличается `ArrayList` от `LinkedList`? В каких случаях лучше использовать первый, а в каких второй?

`ArrayList` это список, реализованный на основе массива, а `LinkedList` — это классический двусвязный список, основанный на объектах с ссылками между ними.

`ArrayList`:

- доступ к произвольному элементу по индексу за *константное* время *O(1)*;
- доступ к элементам по значению за *линейное* время *O(N)*;
- вставка в конец в среднем производится за *константное* время *O(1)*;
- удаление произвольного элемента из списка занимает значительное время т.к. при этом все элементы, находящиеся «правее» смещаются на одну ячейку влево (реальный размер массива (capacity) не изменяется);
- вставка элемента в произвольное место списка занимает значительное время т.к. при этом все элементы, находящиеся «правее» смещаются на одну ячейку вправо;
- минимум накладных расходов при хранении.

`LinkedList`:

- на получение элемента по индексу или значению потребуется *линейное* время *O(N)*;
- но доступ к первому и последнему элементу списка всегда осуществляется за *константное* время *O(1)* — ссылки постоянно хранятся на первый и последний элемент;
- на добавление и удаление в начало или конец списка потребуется *константное* *O(1)*;
- вставка или удаление в/из произвольного место *константное* *O(1)*;
- но поиск позиции вставки и удаления за *линейное* время *O(N)*;
- требует больше памяти для хранения такого же количества элементов, потому что кроме самого элемента хранятся еще указатели на следующий и предыдущий элементы списка.

В целом, `LinkedList` в абсолютных величинах проигрывает `ArrayList` и по потребляемой памяти, и по скорости выполнения операций. `LinkedList` предпочтительно применять, когда нужны частые операции вставки/удаления или в случаях, когда необходимо гарантированное время добавления элемента в список.